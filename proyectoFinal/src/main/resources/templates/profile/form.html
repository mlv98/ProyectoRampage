<!-- src/main/resources/templates/profile/form.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="~{fragments/head :: head('Editar Perfil')}"></head>

<body class="text-gray-100 antialiased bg-gradient-to-br from-black via-gray-800 to-gray-700 min-h-screen flex flex-col items-center ">
<br><br>
<div th:replace="~{fragments/header :: header}" class="w-full mb-12"></div>
  <!-- Margin between header and main -->
  <main class="w-full max-w-lg mx-auto bg-gray-900 bg-opacity-90 rounded-3xl shadow-2xl mt-16 p-8">
    <h1 class="text-3xl lg:text-4xl font-extrabold text-center mb-6 text-white">Editar Perfil</h1>
    <form th:action="@{/profile}" th:object="${profileForm}" method="post" enctype="multipart/form-data" class="space-y-6">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

          <!-- Foto de perfil -->
      <div class="flex items-center space-x-4">
        <img th:src="${user.avatarUrl} != null ? @{${user.avatarUrl}} : @{/images/default-avatar.png}"
             alt="Avatar" class="w-16 h-16 rounded-full object-cover border-2 border-gray-600" />
        <label class="cursor-pointer bg-gray-800 hover:bg-gray-700 text-gray-200 px-4 py-2 rounded-lg transition">
          Cambiar foto
          <input type="file" name="avatarFile" accept="image/*" class="hidden" />
        </label>
      </div>

      <!-- Nombre y Apellido -->
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-300">Nombre</label>
          <input type="text" th:field="*{nombre}" placeholder="Nombre" 
                 class="mt-1 block w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <p class="text-xs text-red-500" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></p>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-300">Apellido</label>
          <input type="text" th:field="*{apellido}" placeholder="Apellido" 
                 class="mt-1 block w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <p class="text-xs text-red-500" th:if="${#fields.hasErrors('apellido')}" th:errors="*{apellido}"></p>
        </div>
      </div>

      <!-- Email -->
      <div>
        <label class="block text-sm font-medium text-gray-300">Email</label>
        <input type="email" th:field="*{email}" readonly 
               class="mt-1 block w-full bg-gray-800 bg-opacity-50 border border-gray-600 rounded-lg p-2 text-gray-400 cursor-not-allowed" />
        <p class="text-xs text-red-500" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></p>
      </div>

      <!-- Contraseña actual y nueva -->
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-300">Contraseña actual</label>
          <input type="password" th:field="*{currentPassword}" placeholder="••••••••" 
                 class="mt-1 block w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <p class="text-xs text-red-500" th:if="${#fields.hasErrors('currentPassword')}" th:errors="*{currentPassword}"></p>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-300">Nueva contraseña</label>
          <input type="password" th:field="*{newPassword}" placeholder="••••••••" 
                 class="mt-1 block w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500" />
          <p class="text-xs text-gray-400">Deja en blanco para mantener la contraseña actual.</p>
        </div>
      </div>

      <!-- Botones de acción -->
      <div class="flex justify-end space-x-4">
        <a th:href="@{/}" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg transition">Cancelar</a>
        <button type="submit" class="px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded-lg transition">
          Guardar cambios
        </button>
      </div>
    </form>
  </main>
   <script src="https://unpkg.com/flowbite@1.5.3/dist/flowbite.min.js" defer></script>
  
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>
	
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script th:src="@{/js/games-carousel.js}" defer></script>
	<script th:src="@{/js/games.js}" defer></script>

</body>
</html>
